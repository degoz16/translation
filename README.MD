# üìù markdown-translation
# üìù markdown-translation

## üìö Sections

- [üëã Introduction](#introduction)

- [üåü Project Overview](#project-overview)

- [üéØ Purpose and Scope](#purpose-and-scope)

- [üöÄ Getting Started](#getting-started)

- [üíª Installation](#installation)

- [üìñ API](#api)

- [üí° Usage](#usage)

## üëã Introduction

Hey, There! ü§ôüèº

Are you tired of copying and pasting your markdown content into translation tools, seeing markdown syntax instead of translatable text and collisions?

Say no more! üëå

With markdown-translation, you can easily generate a skeleton and xlf for CATs, and translate your content on the go! üöÄ

## üåü Project Overview

üöÄüíª This library got you covered with two API interfaces: extract and compose. üíªüöÄ

Extract text from markdown files üìÑ and generate a skeleton/XLF file. üßë‚Äçüíª

Compose the extracted text with the translations from the XLF file to create the translated markdown file. üåéüìÑüí¨

Say goodbye to manual translation work and streamline your workflow with markdown-translation! ü§ñüí™

## üéØ Purpose and Scope

ü§Ø Hold on to your hats, folks! This library is tackling some serious problems with markdown translations!

üö´ Say goodbye to unnecessary heavy load on translators caused by naive approaches that include markdown syntax constructs into text segments.

üí• And don't even get us started on "collisions" - yikes! But fear not, this library has got your back with a reliable solution for extracting text content from markdown without those pesky collisions.

üïµÔ∏è‚Äç‚ôÄÔ∏è How? By parsing and rendering xlf and skeleton, of course! So sit back, relax, and let this library handle all your markdown translation needs.

üßë‚Äçüíª Say goodbye to those pesky issues and hello to efficient and accurate translations with markdown-translation!

## üöÄ Getting Started

### üíª Installation

```
npm install @diplodoc/markdown-translation
```

### üìñ API

#### üîç extract ‚ú®

This function extracts skeleton and XLF strings from a given markdown string üìù, to use in the üíª Computer Assisted Translation tool. üåü

```typescript
function extract(parameters: ExtractParameters): ExtractOutput;
```

#### üéõÔ∏è Parameters `Object`

| Name           | Type             | Description                                               |
| -------------- | ---------------- | --------------------------------------------------------- |
| `markdown`     | `string`         | The markdown string to extract text content from.         |
| `source`       | `LanguageLocale` | The source language and locale.                           |
| `target`       | `LanguageLocale` | The target language and locale.                           |
| `skeletonPath` | `string`         | The path where you will put the skeleton file.         |
| `markdownPath` | `string`         | The path from where the markdown file were read.         |

#### üìö Types

#### üéõÔ∏è LanguageLocale `Object`

| Name       | Type     | Description                                                   |
| ---------- | -------- | ------------------------------------------------------------- |
| `language` | `string` | The language code, as described in ISO 639-1.                 |
| `locale`   | `string` | The locale code in alpha-2 format, as described in ISO 3166-1 |

#### üéõÔ∏è ExtractOutput `Object`

| Name       | Type     | Description                                               |
| ---------- | -------- | --------------------------------------------------------- |
| `skeleton` | `string` | The extracted skeleton string.                            |
| `xlf`      | `string` | The extracted XLF string.                                 |

#### üî§ compose ‚ú®

This function composes üî† translated üìù markdown from given üßü‚Äç‚ôÇÔ∏è skeleton and üí¨ XLF.

```typescript
function compose(parameters: ComposeParameters): string
```

#### üéõÔ∏è Parameters `Object`

| Name           | Type             | Description                                               |
| -------------- | ---------------- | --------------------------------------------------------- |
| `skeleton`     | `string`         | The skeleton with hashes instead of translatable text     |
| `xlf`          | `string`         | XLF with translated text                                  |

### üë®‚Äçüíª Usage

#### üîç Extract

Extract skeleton and xlf from markdown

#### üëÄ Example

```typescript
import {extract} from '@diplodoc/markdown-translation';

const markdown = `# Heading 1

Paragraph

- First list item
- Second list item

Heading 2
-----------

Paragraph with **bold text** and *italic*

> text inside of the blockquote

1. First ordered list item
2. Second ordered list item

[Link text](files/file.md "Link Description")

![Alternative image text](files/image.png "Image title")
`;

const params = {
    markdown,
    source: {language: 'en', locale: 'US' as const},
    target: {language: 'ru', locale: 'RU' as const},
    skeletonPath: 'path/where/you/will/put/generated/skeleton.skl.md',
    markdownPath: 'path/to/file/where/markdown/string/came/from.md',
}

const {skeleton, xlf} = extract(params);

console.log(skeleton);
console.log(xlf);
```

#### üí• Output

![skeleton output](assets/extract-output-skeleton.png "skeleton")

![xlf output](assets/extract-output-xlf.png "xlf")

#### üî§ Compose

Compose skeleton and xlf into translated markdown

#### üëÄ Example

```typescript
import {compose} from '@diplodoc/markdown-translation';

const skeleton = `%%%1%%%
%%%2%%%
- %%%3%%%
- %%%4%%%
%%%5%%%
-----------
%%%6%%%**%%%7%%%**%%%8%%%*%%%9%%%*
> %%%10%%%
1. %%%11%%%
2. %%%12%%%

[%%%13%%%](files/file.md "%%%14%%%")

![%%%15%%%](files/image.png "%%%16%%%")
`

const xlf = `<?xml version="1.0" encoding="UTF-8"?>
<xliff xmlns="urn:oasis:names:tc:xliff:document:1.2" version="1.2">
  <file original="text.md" source-language="ru-RU" target-language="en-US" datatype="markdown">
    <header>
      <skeleton>
        <external-file href="text.skl.md"></external-file>
      </skeleton>
    </header>
    <body>
      <trans-unit id="1">
        <source>Heading 1</source>
        <target>–ó–∞–≥–æ–ª–æ–≤–æ–∫ 1</target>
      </trans-unit>
      <trans-unit id="2">
        <source>Paragraph</source>
        <target>–ü–∞—Ä–∞–≥—Ä–∞—Ñ</target>
      </trans-unit>
      <trans-unit id="3">
        <source>First list item</source>
        <target>–ü–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞</target>
      </trans-unit>
      <trans-unit id="4">
        <source>Second list item</source>
        <target>–í—Ç–æ—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞</target>
      </trans-unit>
      <trans-unit id="5">
        <source>Heading 2</source>
        <target>–ó–∞–≥–æ–ª–æ–≤–æ–∫ 2</target>
      </trans-unit>
      <trans-unit id="6">
        <source>Paragraph with </source>
        <target>–ü–∞—Ä–∞–≥—Ä–∞—Ñ —Å–æ–¥–µ—Ä–∂–∞—â–∏–π </target>
      </trans-unit>
      <trans-unit id="7">
        <source>bold text</source>
        <target>–∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç</target>
      </trans-unit>
      <trans-unit id="8">
        <source> and </source>
        <target> –∏ </target>
      </trans-unit>
      <trans-unit id="9">
        <source>italics</source>
        <target>–∫—É—Ä—Å–∏–≤</target>
      </trans-unit>
      <trans-unit id="10">
        <source>text inside of the blockquote</source>
        <target>—Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ —Ü–∏—Ç–∞—Ç—ã</target>
      </trans-unit>
      <trans-unit id="11">
        <source>First ordered list item</source>
        <target>–ü–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞</target>
      </trans-unit>
      <trans-unit id="12">
        <source>Second ordered list item</source>
        <target>–í—Ç–æ—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞</target>
      </trans-unit>
      <trans-unit id="13">
        <source>Link text</source>
        <target>–¢–µ–∫—Å—Ç —Å—Å—ã–ª–∫–∏</target>
      </trans-unit>
      <trans-unit id="14">
        <source>Link Description</source>
        <target>–û–ø–∏—Å–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏</target>
      </trans-unit>
      <trans-unit id="15">
        <source>Alternative image text</source>
        <target>–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∏</target>
      </trans-unit>
      <trans-unit id="16">
        <source>Image title</source>
        <target>–¢–∏—Ç—É–ª –∫–∞—Ä—Ç–∏–Ω–∫–∏</target>
      </trans-unit>
    </body>
  </file>
</xliff>
`;

const markdown = compose({skeleton, xlf});

console.log(markdown);
```

#### üí• Output

![markdown output](assets/compose-output-markdown.png "markdown")
